import{_ as T,i as p,r as f,c as r,b as v,a as e,t as i,F as h,d as b,e as l,w,v as x,g as S,o as c,p as C,h as k}from"./index-DqV6pCQQ.js";const L=1500,m=2e3,V={data(){return{api:{url:"https://ec-course-api.hexschool.io/v2",path:"sky030b"},productTemp:{},qty:1,loadingStatus:{id:"",deleteId:""},isLoading:!1}},methods:{async getProduct(){this.isLoading=!0;const s=this.$route.params.id;this.loadingStatus.id=s;try{const o=await this.axios.get(`${this.api.url}/api/${this.api.path}/product/${s}`);this.productTemp=o.data.product}catch(o){p.error(o.response.data.message,{autoClose:m})}this.loadingStatus.id="",this.isLoading=!1},async addToCart(s,o=1){this.isLoading=!0,this.loadingStatus.id=s;const a={product_id:s,qty:o};try{const d=await this.axios.post(`${this.api.url}/api/${this.api.path}/cart`,{data:a});p.success(d.data.message,{autoClose:L})}catch(d){p.error(d.response.data.message,{autoClose:m})}this.loadingStatus.id="",this.isLoading=!1},init(){this.getProduct()}},watch:{isLoading(s){s?document.body.style.overflow="hidden":document.body.style.overflow=""}},mounted(){this.init()}},_=s=>(C("data-v-2ffef343"),s=s(),k(),s),q={class:"container border border-2 rounded py-2"},I={class:"text-secondary"},D={class:"title"},j={class:"body"},B={class:"row align-items-center"},N={class:"col col-5 d-flex flex-column justify-content-center"},P=["src","alt"],U={class:"d-flex gap-3 w-100 flex-wrap"},F=["src","alt"],K={class:"col col-7"},E={class:"badge bg-primary rounded-pill mb-1"},M=_(()=>e("h5",null,"商品描述：",-1)),O=_(()=>e("h5",null,"商品內容：",-1)),W={class:"content"},z={key:0,class:"h5"},A={key:1,class:"h6"},G={key:2,class:"h5"},H={class:"mt-3"},J={class:"input-group"},Q=["disabled"];function R(s,o,a,d,t,u){const g=f("loadingVue");return c(),r(h,null,[v(g,{active:t.isLoading},null,8,["active"]),e("div",q,[e("div",I,[e("h3",D,[e("span",null,i(t.productTemp.title),1)])]),e("div",j,[e("div",B,[e("div",N,[e("img",{class:"object-fit-cover",width:"400",height:"400",src:t.productTemp.imageUrl,alt:t.productTemp.title+"的圖片"},null,8,P),e("div",U,[(c(!0),r(h,null,b(t.productTemp.imagesUrl,(n,y)=>(c(),r("img",{key:"img"+y,class:"object-fit-cover",width:"100",height:"100",src:n,alt:t.productTemp.title+"的其他小圖片"},null,8,F))),128))])]),e("div",K,[e("span",E,i(t.productTemp.category),1),M,e("p",null,i(t.productTemp.description),1),O,e("p",W,i(t.productTemp.content),1),!t.productTemp.origin_price||t.productTemp.origin_price===t.productTemp.price?(c(),r("div",z,i(t.productTemp.price)+" 元",1)):l("",!0),t.productTemp.origin_price!==t.productTemp.price?(c(),r("del",A,"原價 "+i(t.productTemp.origin_price)+" 元",1)):l("",!0),t.productTemp.origin_price!==t.productTemp.price?(c(),r("div",G,"現在只要 "+i(t.productTemp.price)+" 元",1)):l("",!0),e("div",H,[e("div",J,[w(e("input",{type:"number",class:"form-control",min:"1","onUpdate:modelValue":o[0]||(o[0]=n=>t.qty=n),onKeyup:o[1]||(o[1]=S(n=>u.addToCart(t.productTemp.id,t.qty),["enter"]))},null,544),[[x,t.qty]]),e("button",{type:"button",class:"btn btn-primary",disabled:!t.productTemp.is_enabled,onClick:o[2]||(o[2]=n=>u.addToCart(t.productTemp.id,t.qty))},"加入購物車",8,Q)])])])])])])],64)}const Y=T(V,[["render",R],["__scopeId","data-v-2ffef343"]]);export{Y as default};
